<Window x:Class="TrainDispatcherSimulator.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:control="clr-namespace:TrainDispatcherSimulator.Controls"
        xmlns:oxy="http://oxyplot.org/wpf"
        xmlns:localData="clr-namespace:TrainDispatcherSimulator.Data"
        Title="MainWindow"  
        Width="1900" Height="1080"
        Background="Black"
        WindowStartupLocation="CenterScreen" 
        WindowState="Maximized">

    <Window.DataContext>
        <localData:MainViewModel/>
    </Window.DataContext>

    
    
    <Window.Resources>
        <ResourceDictionary>
            <Style x:Key="AxesStyle" TargetType="oxy:LinearAxis">
                <Setter Property="AxisDistance" Value="5"/>
                <Setter Property="AxislineStyle" Value="Solid"/>
                <Setter Property="MajorGridlineStyle" Value="Solid"/>
                <Setter Property="MinorGridlineStyle" Value="Solid"/>
                
                <Setter Property="AxislineColor" Value="White"/>
                <Setter Property="MinorGridlineColor" Value="Gray"/>
                <Setter Property="MajorGridlineColor" Value="Gray"/>
            </Style>

            <Style x:Key="Dolazni" TargetType="oxy:LineSeries">
                <Setter Property="Color" Value="Red"/>
                <Setter Property="BrokenLineThickness" Value="2" />
            </Style>

            <Style x:Key="Odlazni" TargetType="oxy:LineSeries">
                <Setter Property="Color" Value="Green"/>
                <Setter Property="BrokenLineThickness" Value="2" />
            </Style>
            <Style x:Key="FocusVisual">
                <Setter Property="Control.Template">
                    <Setter.Value>
                        <ControlTemplate>
                            <Rectangle Margin="2" SnapsToDevicePixels="true" Stroke="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}" StrokeThickness="1" StrokeDashArray="1 2"/>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
            
            
            
            <SolidColorBrush x:Key="Button.Static.Background" Color="#FFDDDDDD"/>
            <SolidColorBrush x:Key="Button.Static.Border" Color="#FF707070"/>
            <SolidColorBrush x:Key="Button.MouseOver.Background" Color="#50FFFFFF"/>
            <SolidColorBrush x:Key="Button.MouseOver.Border" Color="#FF707070"/>
            <SolidColorBrush x:Key="Button.Pressed.Background" Color="#90FFFFFF"/>
            <SolidColorBrush x:Key="Button.Pressed.Border" Color="#FF707070"/>
            <SolidColorBrush x:Key="Button.Disabled.Background" Color="#FFF4F4F4"/>
            <SolidColorBrush x:Key="Button.Disabled.Border" Color="#FFADB2B5"/>
            <SolidColorBrush x:Key="Button.Disabled.Foreground" Color="#FF838383"/>
            <Style x:Key="CommandButtonStyle" TargetType="{x:Type Button}">
                <Setter Property="FocusVisualStyle" Value="{StaticResource FocusVisual}"/>
                <Setter Property="Background" Value="Transparent"/>
                <Setter Property="BorderBrush" Value="{StaticResource Button.Static.Border}"/>
                <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
                <Setter Property="BorderThickness" Value="1"/>
                <Setter Property="HorizontalContentAlignment" Value="Center"/>
                <Setter Property="VerticalContentAlignment" Value="Center"/>
                <Setter Property="Width" Value="50"/>
                <Setter Property="Height" Value="50"/>
                <Setter Property="Margin" Value="5"/>
                <Setter Property="Padding" Value="1"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type Button}">
                            <Border x:Name="border" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" SnapsToDevicePixels="true">
                                <ContentPresenter x:Name="contentPresenter" Focusable="False" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsDefaulted" Value="true">
                                    <Setter Property="BorderBrush" TargetName="border" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"/>
                                </Trigger>
                                <Trigger Property="IsMouseOver" Value="true">
                                    <Setter Property="Background" TargetName="border" Value="{StaticResource Button.MouseOver.Background}"/>
                                    <Setter Property="BorderBrush" TargetName="border" Value="{StaticResource Button.MouseOver.Border}"/>
                                </Trigger>
                                <Trigger Property="IsPressed" Value="true">
                                    <Setter Property="Background" TargetName="border" Value="{StaticResource Button.Pressed.Background}"/>
                                    <Setter Property="BorderBrush" TargetName="border" Value="{StaticResource Button.Pressed.Border}"/>
                                </Trigger>
                                <Trigger Property="IsEnabled" Value="false">
                                    <Setter Property="Background" TargetName="border" Value="{StaticResource Button.Disabled.Background}"/>
                                    <Setter Property="BorderBrush" TargetName="border" Value="{StaticResource Button.Disabled.Border}"/>
                                    <Setter Property="TextElement.Foreground" TargetName="contentPresenter" Value="{StaticResource Button.Disabled.Foreground}"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </ResourceDictionary>
    </Window.Resources>


    <ScrollViewer
        VerticalScrollBarVisibility="Auto"
        HorizontalScrollBarVisibility="Auto">
        
        
        <Grid>


        
            <Grid x:Name="graphGrid" Background="Black" Opacity="0.9">
                <oxy:Plot Title="{Binding Title}" Background="Black">
                    <oxy:PlotView.Series>
                        <oxy:LineSeries ItemsSource="{Binding Linija1}" Style="{StaticResource Odlazni}" />
                        <oxy:LineSeries ItemsSource="{Binding Linija2}" Style="{StaticResource Odlazni}" />
                        <oxy:LineSeries ItemsSource="{Binding Linija3}" Style="{StaticResource Dolazni}" />

                    </oxy:PlotView.Series>
                    <oxy:Plot.Axes>
                        <oxy:LinearAxis Position="Bottom" Minimum="6" Maximum="22" Style="{StaticResource AxesStyle}" MinorStep="0.5" MajorStep="1"   />
                        <oxy:LinearAxis Position="Top" Minimum="6" Maximum="22" Style="{StaticResource AxesStyle}" MinorStep="0.5" MajorStep="1" />
                        <oxy:CategoryAxis Labels="{Binding Stations}" Position="Right" Minimum="0" Maximum ="8" Style="{StaticResource AxesStyle}" MinorStep="1" MajorStep="1" IsTickCentered="True"  />
                        <oxy:CategoryAxis Labels="{Binding Stations}" Position="Left" Minimum="0" Maximum ="8"  Style="{StaticResource AxesStyle}" MinorStep="1" MajorStep="1" IsTickCentered="True" />
                    </oxy:Plot.Axes>

                </oxy:Plot>
            </Grid>


        
        
        
            <Grid x:Name="railwayGrid" Background="Black">
                <Grid.RowDefinitions>
                    <RowDefinition Height="1*"/>
                    <RowDefinition Height="80"/>
                    <RowDefinition Height="80"/>
                    <RowDefinition Height="80"/>
                    <RowDefinition Height="80"/>
                    <RowDefinition Height="80"/>
                    <RowDefinition Height="80"/>
                    <RowDefinition Height="80"/>
                    <RowDefinition Height="80"/>
                    <RowDefinition Height="80"/>
                    <RowDefinition Height="1*"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="80"/>
                    <ColumnDefinition Width="1*"/>
                    <ColumnDefinition Width="80"/>
                    <ColumnDefinition Width="80"/>
                    <ColumnDefinition Width="80"/>
                    <ColumnDefinition Width="80"/>
                    <ColumnDefinition Width="80"/>
                    <ColumnDefinition Width="80"/>
                    <ColumnDefinition Width="80"/>
                    <ColumnDefinition Width="80"/>
                    <ColumnDefinition Width="80"/>
                    <ColumnDefinition Width="80"/>
                    <ColumnDefinition Width="80"/>
                    <ColumnDefinition Width="80"/>
                    <ColumnDefinition Width="80"/>
                    <ColumnDefinition Width="80"/>
                    <ColumnDefinition Width="80"/>
                    <ColumnDefinition Width="80"/>
                    <ColumnDefinition Width="80"/>
                    <ColumnDefinition Width="80"/>
                    <ColumnDefinition Width="1*"/>
                </Grid.ColumnDefinitions>

                <control:RailwayPrivola Grid.Row="5" Grid.Column="0" RailwayName="P1"/>
                <control:RailwayPrivola Grid.Row="6" Grid.Column="0" RailwayName="P2"/>
            
                <control:RailwaySection Grid.Row="5" Grid.Column="1"/>
                <control:RailwaySection Grid.Row="6" Grid.Column="1"/>
                <control:RailwayCross Grid.Row="5" Grid.Column="2" Grid.RowSpan="2"/>

                <control:RailwaySwitch2 Grid.Row="4" Grid.Column="3" Grid.RowSpan="2"/>
                <control:RailwaySwitch1 Grid.Row="6" Grid.Column="3" Grid.RowSpan="2"/>
                <control:RailwayCurve2 Grid.Row="3" Grid.Column="4" Grid.RowSpan="2"/>
                <control:RailwayCurve1 Grid.Row="7" Grid.Column="4" Grid.RowSpan="2"/>


                <control:RailwaySwitch2 Grid.Row="4" Grid.Column="4" Grid.RowSpan="2"/>
                <control:RailwaySwitch1 Grid.Row="6" Grid.Column="4" Grid.RowSpan="2"/>
                <control:RailwaySection Grid.Row="4" Grid.Column="5" Grid.ColumnSpan="3" RightSemaphoreVisibility="Collapsed"/>
                <control:RailwaySection Grid.Row="7" Grid.Column="5" Grid.ColumnSpan="3" RightSemaphoreVisibility="Collapsed"/>

                <control:RailwaySection Grid.Row="5" Grid.Column="5" Grid.ColumnSpan="10" Platform="{Binding ElementName=platform3}"  ManuverSemaphoreVisibility="Visible"/>
                <control:RailwaySection Grid.Row="6" Grid.Column="5" Grid.ColumnSpan="8" Platform="{Binding ElementName=platform2}"  ManuverSemaphoreVisibility="Visible"/>
                <control:RailwayCurve1 Grid.Row="6" Grid.Column="13" Grid.RowSpan="2"/>
                <control:RailwaySwitch3 Grid.Row="7" Grid.Column="14" Grid.RowSpan="2"/>

                <control:Platform Grid.Row="6" Grid.Column="9" Grid.ColumnSpan="3" Title="P2" x:Name="platform2" Grid.RowSpan="2"  Height="50" Margin="0,0,0,50" VerticalAlignment="Bottom"/>
                <control:Platform Grid.Row="7" Grid.Column="9" Grid.ColumnSpan="3" Title="P1" x:Name="platform1" Grid.RowSpan="2"  Height="50" Margin="0,50,0,0" VerticalAlignment="Top"/>
                <control:Platform Grid.Row="3" Grid.Column="9" Grid.ColumnSpan="3" Title="P4" x:Name="platform4" Grid.RowSpan="2"  Height="50" Margin="0,0,0,50" VerticalAlignment="Bottom"/>
                <control:Platform Grid.Row="4" Grid.Column="9" Grid.ColumnSpan="3" Title="P3" x:Name="platform3" Grid.RowSpan="2"  Height="50" Margin="0,50,0,0" VerticalAlignment="Top"/>

                <control:RailwaySection Grid.Row="8" Grid.Column="6" Grid.ColumnSpan="8" Platform="{Binding ElementName=platform1}"  ManuverSemaphoreVisibility="Visible"/>
                <control:RailwaySwitch1 Grid.Row="8" Grid.Column="5" Grid.RowSpan="2"/>
                <control:RailwaySection Grid.Row="9" Grid.Column="6" Grid.ColumnSpan="9"  ManuverSemaphoreVisibility="Visible"/>
                <control:RailwaySwitch3 Grid.Row="8" Grid.Column="15" Grid.RowSpan="2"/>
                <control:RailwaySection Grid.Row="9" Grid.Column="16" Grid.ColumnSpan="1" RightSemaphoreVisibility="Collapsed" LeftSemaphoreVisibility="Collapsed"/>

                <control:RailwaySwitch2 Grid.Row="2" Grid.Column="5" Grid.RowSpan="2"/>
                <control:RailwaySection Grid.Row="3" Grid.Column="6" Grid.ColumnSpan="8" Platform="{Binding ElementName=platform4}" ManuverSemaphoreVisibility="Visible"/>
                <control:RailwaySwitch5 Grid.Row="4" Grid.Column="15" Grid.RowSpan="2"/>
                <control:RailwayCurve1 Grid.Row="3" Grid.Column="14" Grid.RowSpan="2"/>
                <control:RailwaySection Grid.Row="4" Grid.Column="16" Grid.ColumnSpan="3" RightSemaphoreVisibility="Collapsed"/>



                <control:RailwaySection Grid.Row="8" Grid.Column="19" Grid.ColumnSpan="2" RightSemaphoreVisibility="Collapsed"/>
                <control:RailwaySwitch2 Grid.Row="8" Grid.Column="17" Grid.RowSpan="2"/>
                <control:RailwaySwitch3 Grid.Row="7" Grid.Column="18" Grid.RowSpan="2"/>
                <control:RailwayCurve1 Grid.Row="6" Grid.Column="17" Grid.RowSpan="2"/>
                <control:RailwayCurve1 Grid.Row="5" Grid.Column="16" Grid.RowSpan="2"/>



                <control:RailwaySwitch2 Grid.Row="1" Grid.Column="6" Grid.RowSpan="2"/>
                <control:RailwaySection Grid.Row="1" Grid.Column="7" Grid.ColumnSpan="8"  LeftSemaphoreVisibility="Collapsed" RightSemaphoreVisibility="Collapsed"/>
                <control:RailwaySection Grid.Row="2" Grid.Column="7" Grid.ColumnSpan="8"  LeftSemaphoreVisibility="Collapsed" RightSemaphoreVisibility="Collapsed"/>
                <control:RailwaySwitch3 Grid.Row="1" Grid.Column="15" Grid.RowSpan="2"/>
                <control:RailwaySection Grid.Row="2" Grid.Column="16" Grid.ColumnSpan="2" LeftSemaphoreVisibility="Collapsed" RightSemaphoreVisibility="Collapsed"/>
                
            </Grid>






            <!-- command buttons -->
            <StackPanel Orientation="Horizontal" VerticalAlignment="Top" HorizontalAlignment="Right" Margin="10" Background="#30000000">
                <Button Click="trainButton_Click" Style="{DynamicResource CommandButtonStyle}">
                    <Path Width="28.5" Height="45.9167" Canvas.Left="23.75" Canvas.Top="14.25" Stretch="Fill" Fill="White" Data="F1 M 29.2917,20.5834L 46.7083,20.5833C 48.4572,20.5833 50.6667,22.7928 50.6667,24.5417L 50.6667,46.7083C 50.6667,48.4572 48.4572,50.6667 46.7083,50.6667L 45.9167,50.6667L 45.9167,52.5667L 52.25,60.1667L 49.0833,60.1667L 43.8056,53.8333L 32.1944,53.8333L 26.9167,60.1667L 23.75,60.1667L 30.0833,52.5667L 30.0833,50.6667L 29.2917,50.6667C 27.5427,50.6667 25.3333,48.4573 25.3333,46.7083L 25.3333,24.5417C 25.3333,22.7928 27.5427,20.5834 29.2917,20.5834 Z M 34.8333,22.1667C 33.9588,22.1667 33.25,22.8756 33.25,23.7501C 33.25,24.6245 33.9588,25.3334 34.8333,25.3334L 41.1666,25.3334C 42.041,25.3334 42.7499,24.6245 42.7499,23.7501C 42.7499,22.8756 42.041,22.1667 41.1666,22.1667L 34.8333,22.1667 Z M 31.6666,26.9167C 29.9177,26.9167 28.5,28.3345 28.5,30.0834L 28.5,31.6667C 28.5,33.4156 29.9177,34.8334 31.6666,34.8334L 44.3333,34.8334C 46.0822,34.8334 47.4999,33.4156 47.4999,31.6667L 47.4999,30.0834C 47.4999,28.3345 46.0822,26.9167 44.3333,26.9167L 31.6666,26.9167 Z M 30.875,42.75C 29.5633,42.75 28.5,43.8133 28.5,45.125C 28.5,46.4367 29.5633,47.5 30.875,47.5C 32.1867,47.5 33.25,46.4367 33.25,45.125C 33.25,43.8133 32.1867,42.75 30.875,42.75 Z M 45.125,42.75C 43.8133,42.75 42.75,43.8133 42.75,45.125C 42.75,46.4367 43.8133,47.5 45.125,47.5C 46.4366,47.5 47.5,46.4367 47.5,45.125C 47.5,43.8133 46.4366,42.75 45.125,42.75 Z M 41.9583,14.25C 43.27,14.25 44.3333,15.3133 44.3333,16.625C 44.3333,17.9367 43.27,19 41.9583,19C 40.6466,19 39.5833,17.9367 39.5833,16.625C 39.5833,15.3133 40.6466,14.25 41.9583,14.25 Z M 34.0417,14.25C 35.3533,14.25 36.4167,15.3133 36.4167,16.625C 36.4167,17.9367 35.3533,19 34.0417,19C 32.73,19 31.6667,17.9367 31.6667,16.625C 31.6667,15.3133 32.73,14.25 34.0417,14.25 Z "/>
                </Button>
            
                <Button Click="graphButton_Click" Style="{DynamicResource CommandButtonStyle}">
                    <Path Stretch="Fill" Fill="White" Data="F1 M 17,19L 20,19L 20,54L 59,54L 59,57L 17,57L 17,19 Z M 22,52L 22,47.25L 32,37L 45,43.75L 57,25L 59,27L 46,48L 32.25,41L 22,52 Z "/>
                </Button>

                <Button Click="logButton_Click" Style="{DynamicResource CommandButtonStyle}">
                    <Path Width="33.0046" Height="34.0047" Canvas.Left="19.0027" Canvas.Top="21.0029" Stretch="Fill" Fill="White" Data="F1 M 19.0027,21.0029L 19.0027,25.0034L 44.0061,25.0034L 44.0061,21.0029L 19.0027,21.0029 Z M 19.0027,27.0038L 19.0027,31.0042L 49.0068,31.0042L 49.0068,27.0038L 19.0027,27.0038 Z M 19.0027,33.0046L 19.0027,37.005L 43.006,37.005L 43.006,33.0046L 19.0027,33.0046 Z M 19.0027,39.0054L 19.0027,43.0059L 52.0073,43.0059L 52.0073,39.0054L 19.0027,39.0054 Z M 19.0027,45.0064L 19.0027,49.0068L 46.0064,49.0068L 46.0064,45.0064L 19.0027,45.0064 Z M 19.0027,51.0073L 19.0027,55.0077L 51.0071,55.0077L 51.0071,51.0073L 19.0027,51.0073 Z " />
                </Button>

            </StackPanel>


        </Grid>
    </ScrollViewer>
</Window>
